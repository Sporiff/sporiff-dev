---
export async function getStaticPaths({ paginate }) {
  const allPosts = (await Astro.glob("./**/*.mdx")).sort(
    (a, b) =>
      new Date(b.frontmatter.pubDate).valueOf() -
      new Date(a.frontmatter.pubDate).valueOf()
  );

  return paginate(allPosts, { pageSize: 10 });
}

const { page } = Astro.props;
import { simpleDate } from "../../lib";
import Layout from "../../layouts/Layout.astro";
---

<Layout title={`Posts: page ${page.currentPage}`}>
  <main>
    <h1 class="text-4xl font-semibold mb-10 text-center">
      Posts: page {page.currentPage}
    </h1>
    <section id="pages">
      {
        page.data.map((option) => (
          <a href={option.url}>
            <div class="border-l-4 bg-neutral-100 dark:bg-neutral-700 mb-10 p-4 border-blue-700 dark:border-blue-500;">
              <h2>{option.frontmatter.title}</h2>
              <time>{simpleDate(option.frontmatter.pubDate)}</time>
              <p>{option.frontmatter.description}</p>
            </div>
          </a>
        ))
      }
    </section>
    <nav class="-mt-6 flex justify-between">
      {
        page.url.prev ? (
          <a
            class="font-medium text-blue-700 hover:text-blue-900 visited:text-purple-800 dark:text-blue-300 dark:hover:text-blue-500 dark:visited:text-purple-500"
            href={page.url.prev}
          >
            Newer
          </a>
        ) : null
      }
      {
        page.url.next ? (
          <a
            class="font-medium text-blue-700 hover:text-blue-900 visited:text-purple-800 dark:text-blue-300 dark:hover:text-blue-500 dark:visited:text-purple-500"
            href={page.url.next}
          >
            Older
          </a>
        ) : null
      }
    </nav>
  </main>
</Layout>
