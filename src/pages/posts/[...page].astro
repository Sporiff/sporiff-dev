---
export async function getStaticPaths({ paginate }) {
  const allPosts = (await Astro.glob("./**/*.mdx")).sort(
    (a, b) =>
      new Date(b.frontmatter.pubDate).valueOf() -
      new Date(a.frontmatter.pubDate).valueOf()
  );

  return paginate(allPosts, { pageSize: 10 });
}

const { page } = Astro.props;
import { simpleDate } from '../../lib';
import Pagination from '@components/Pagination.astro';
import Layout from '@layouts/Base.astro';
---

<Layout
  title={`Posts: page ${page.currentPage}`}
  author="CiarÃ¡n Ainsworth"
  description="Life inside a computer"
  pubDate=""
  image="/images/avatar.webp"
  alt="A pixel art rendering of the author"
>
  <section class="prose prose-a:no-underline dark:prose-invert lg:prose-xl prose-h1:text-center ml-auto mr-auto">
    <h1>
      Posts: page {page.currentPage}
    </h1>
    <section id="pages">
      {
        page.data.map((option) => (
          <a href={option.url}>
            <div class="not-prose border-l-4 bg-gray-50 dark:bg-gray-800 mb-10 p-4 border-blue-700 dark:border-blue-500 rounded-lg">
              <h2 class="text-2xl font-bold">{option.frontmatter.title}</h2>
              <time class="text-base">{simpleDate(option.frontmatter.pubDate)}</time>
              <p>{option.frontmatter.description}</p>
            </div>
          </a>
        ))
      }
    </section>
    <Pagination page={page} />
    <!--
    <nav class="-mt-6 flex justify-between">
      {
        page.url.prev ? (
          <a
            class="font-medium text-blue-700 hover:text-blue-900 visited:text-purple-800 dark:text-blue-300 dark:hover:text-blue-500 dark:visited:text-purple-500"
            href={page.url.prev}
          >
            Newer
          </a>
        ) : null
      }
      {
        page.url.next ? (
          <a
            class="font-medium text-blue-700 hover:text-blue-900 visited:text-purple-800 dark:text-blue-300 dark:hover:text-blue-500 dark:visited:text-purple-500"
            href={page.url.next}
          >
            Older
          </a>
        ) : null
      }
    </nav>
  -->
  </section>
</Layout>
